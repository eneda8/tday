<% layout("layouts/boilerplate")%>

<div class="mainContainer d-flex justify-content-center container-fluid w-100 px-0">
    <div class="row mx-lg-5 w-100 d-flex flex-nowrap justify-content-center px-0">
        <div class="col-3 px-0 mt-lg-3 d-none d-md-block">
            <h3 class="title mb-2" style="font-size: 1.7rem">Home</h3>
            <%- include("../partials/leftSidebar") %>
        </div>
        <div class="col flex-grow-1 mx-lg-3 bg-light mt-lg-3 px-3 shadow-sm rounded">
            <h5 class="mt-3 mb-0"><span id="today-header">Today</span> 
            <% if(!posts.includes(null)){ %>
            <span id="10-ratings" class="text-muted small">Â· 10 random ratings<i class="fas fa-random text-right text-white btn btn-sm btn-primary ml-2" title="Refresh for 10 more" onclick="location.reload()"></i> 
            <%}%> 
            </h5> 
            </span>
            <% if(!posts.includes(null)){ %>
            <%- include('../partials/homeFilters')%>
            <%for (post of posts) { %> 
                <%- include('../partials/posts/edit')%>
                <%- include('../partials/posts')%>
                <% } %> 
                <% if(posts.length) { %> 
                    <button class="btn btn-primary w-100 mb-2"><i class="fas fa-random text-white mr-2" onclick="location.reload()"></i>Refresh for 10 more ratings </button>
                <% } else {%> 
                <div class="card border-0">
                    <div class="text-center py-5">                            
                        <h5 class="">No ratings found</h5>
                        <a class="text-primary d-block" role="button"><i class="fas fa-random text-right text-primary mr-1" onclick="location.reload()"></i>Refresh</a>
                        <a class="mb-5" href="" data-toggle="modal" id="newPostLink" data-target="#newPostModal"><i class="far fa-star text-primary mr-1"></i>Submit a rating</a>
                    </div>
                </div>
                <% } %> 
            <% } %>
        </div>
        <div class="col-3 mt-lg-3 px-0 d-none d-lg-block">
            <%- include("../partials/rightSidebar") %>
        </div>
    </div> 
</div>



<%- include("../partials/posts/new") %>

